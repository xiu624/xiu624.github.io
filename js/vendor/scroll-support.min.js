/**
 * Extend jquery with a scrollspy plugin.
 * This watches the window scroll and fires events when elements are scrolled into viewport.
 *
 * throttle() and getTime() taken from Underscore.js
 * https://github.com/jashkenas/underscore
 *
 * @author Copyright 2013 John Smart
 * @license https://raw.github.com/thesmart/jquery-scrollspy/master/LICENSE
 * @see https://github.com/thesmart
 * @version 0.1.2
 */
(function(e){function u(t,r,i,s){var o=e();e.each(n,function(e,n){var u=n.offset().top,a=n.offset().left,f=a+n.width(),l=u+n.height();var c=!(a>r||f<s||u>i||l<t);if(c){o.push(n)}});return o}function a(){++s;var n=t.scrollTop(),i=t.scrollLeft(),a=i+t.width(),f=n+t.height();var l=u(n+o.top,a+o.right,f+o.bottom,i+o.left);e.each(l,function(e,t){var n=t.data("scrollSpy:ticks");if(typeof n!="number"){t.triggerHandler("scrollSpy:enter")}t.data("scrollSpy:ticks",s)});e.each(r,function(e,t){var n=t.data("scrollSpy:ticks");if(typeof n=="number"&&n!==s){t.triggerHandler("scrollSpy:exit");t.data("scrollSpy:ticks",null)}});r=l}function f(){t.trigger("scrollSpy:winSize")}function c(e,t,n){var r,i,s;var o=null;var u=0;n||(n={});var a=function(){u=n.leading===false?0:l();o=null;s=e.apply(r,i);r=i=null};return function(){var f=l();if(!u&&n.leading===false)u=f;var c=t-(f-u);r=this;i=arguments;if(c<=0){clearTimeout(o);o=null;u=f;s=e.apply(r,i);r=i=null}else if(!o&&n.trailing!==false){o=setTimeout(a,c)}return s}}var t=e(window);var n=[];var r=[];var i=false;var s=0;var o={top:0,right:0,bottom:0,left:0};var l=Date.now||function(){return(new Date).getTime()};e.scrollSpy=function(r,s){r=e(r);r.each(function(t,r){n.push(e(r))});s=s||{throttle:100};o.top=s.offsetTop||0;o.right=s.offsetRight||0;o.bottom=s.offsetBottom||0;o.left=s.offsetLeft||0;var u=c(a,s.throttle||100);var f=function(){e(document).ready(u)};if(!i){t.on("scroll",f);t.on("resize",f);i=true}setTimeout(f,0);return r};e.updateScrollSpyOptions=function(e){o.top=e.offsetTop||0;o.right=e.offsetRight||0;o.bottom=e.offsetBottom||0;o.left=e.offsetLeft||0;a()};e.winSizeSpy=function(n){e.winSizeSpy=function(){return t};n=n||{throttle:100};return t.on("resize",c(f,n.throttle||100))};e.fn.scrollSpy=function(t){return e.scrollSpy(e(this),t)}})(jQuery);

/**
 * Smooth scroll for in page links.
 * http://wibblystuff.blogspot.de/2014/04/in-page-smooth-scroll-using-css3.html
 */
(function(e){var t,n;e.scrollSmoothInPage=function(r){e("a[href*=#]:not([href=#])").on("click",function(i){if(location.pathname.replace(/^\//,"")==this.pathname.replace(/^\//,"")&&location.hostname==this.hostname){t=e(this.hash);t=t.length?t:e("[id="+this.hash.slice(1)+"]");if(t.length){if(typeof document.body.style.transitionProperty==="string"){i.preventDefault();var s=e(document).height()-e(window).height();n=t.offset().top;if(n>s){n=s}e("html").css({"margin-top":e(window).scrollTop()-n+"px",transition:r+"s ease-in-out"}).data("transitioning",true)}else{e("html, body").animate({scrollTop:n},r*1e3);return}}}});e("html").on("transitionend webkitTransitionEnd msTransitionEnd oTransitionEnd",function(t){if(t.target==t.currentTarget&&e(this).data("transitioning")===true){e(this).removeAttr("style").data("transitioning",false);e("html, body").scrollTop(n);return}})}})(jQuery);